generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model cases {
  caseId                Int       @id @default(autoincrement()) @map("case_id")
  fhirResourceId        String?   @unique @map("fhir_resource_id")
  createTime            DateTime? @map("create_time") @db.Timestamp(6) @default(now())
  updateTime            DateTime? @map("update_time") @db.Timestamp(6) @default(now())
  patientId             Int       @map("patient_id")
  schedulingId          Int       @map("scheduling_id") @unique
  procedureTabId        Int       @map("procedure_tab_id") @unique
  clinicalId            Int       @map("clinical_tab_id") @unique
  vendorConfirmation    String    @map("vendor_confirmation") @default("Incomplete")

  comment            comment[]
  document           document[]
  patient            patient @relation(fields: [patientId], references: [patientId], onDelete: Cascade, onUpdate: NoAction)
  financial          financial[]
  scheduling         scheduling @relation(fields: [schedulingId], references: [schedulingId]) 
  procedureTab       procedureTab @relation(fields: [procedureTabId], references: [procedureTabId])
  clinical           clinical @relation(fields: [clinicalId], references: [clinicalId])
  productTab         productTab[]
}

model comment {
  commentId         Int @id @default(autoincrement()) @map("comment_id")
  commentText       String @map("comment_text")
  userName          String @map("user_name")
  caseId            Int?      @map("case_id")
  createTime        DateTime? @map("create_time") @db.Timestamp(6) @default(now())
  updateTime        DateTime? @map("update_time") @db.Timestamp(6) @default(now())
  cases             cases?  @relation(fields: [caseId], references: [caseId], onDelete: NoAction, onUpdate: NoAction)
}


model document {
  documentId         Int @id @default(autoincrement()) @map("document_id")
  docTypes           String[] @map("document_types")
  notes              String? @default("")
  user               String
  caseId             Int?      @map("case_id")
  storagePath        String    @map("storage_path")
  signatureDate      DateTime? @map("signature_date")
  createTime         DateTime? @map("create_time") @db.Timestamp(6) @default(now())
  updateTime         DateTime? @map("update_time") @db.Timestamp(6) @default(now())
  cases              cases? @relation(fields: [caseId], references: [caseId], onDelete: NoAction, onUpdate: NoAction)
}


model patient {
  patientId      Int       @id @default(autoincrement()) @map("patient_id")
  fhirResourceId String?   @unique @map("fhir_resource_id")
  firstName      String?   @map("first_name") @default("")
  middleName     String?   @map("middle_name") @default("")
  lastName       String?   @map("last_name") @default("")
  mrn            String?   @default("")
  sexId          Int?      @map("sex_id")
  dateOfBirth    DateTime? @map("date_of_birth") @db.Timestamp(6)
  createTime     DateTime? @map("create_time") @db.Timestamp(6) @default(now())
  updateTime     DateTime? @map("update_time") @db.Timestamp(6) @default(now())
  cases          cases[]
  address        address[]
  phone          phone[]
  sex            sex? @relation(fields: [sexId], references: [sexId], onDelete: Cascade, onUpdate: NoAction)
}

model phone {
  phoneId       Int        @id @default(autoincrement()) @map("phone_id")
  patientId     Int?       @map("patient_id")
  phoneNumber   String?    @map("phone_number") @default("")
  type          String?    @default("")
  hasVoicemail  Boolean?   @map("has_voicemail")
  patient       patient?   @relation(fields: [patientId], references: [patientId], onDelete: Cascade, onUpdate: NoAction)
}

model address {
  addressId      Int       @id @default(autoincrement()) @map("address_id")
  patientId      Int?      @map("patient_id")
  stateId        Int?      @map("state_id")
  addressOne     String?   @default("") @map("address_one")
  addressTwo     String?   @default("") @map("address_two")
  city           String?   @default("")
  zip            String?   @default("")
  patient        patient?  @relation(fields: [patientId], references: [patientId], onDelete: Cascade, onUpdate: NoAction)
  state          state?    @relation(fields: [stateId], references: [stateId], onDelete: Cascade, onUpdate: NoAction)
}

model sex {
  sexId         Int @id @default(autoincrement()) @map("sex_id")
  sexName       String
  patients      patient[]
}

model state {
  stateId       Int @id @default(autoincrement()) @map("state_id")
  stateName     String
  address      address[]
}


model scheduling {
  schedulingId       Int       @id @default(autoincrement()) @map("scheduling_id")
  admissionTypeId    Int?      @map("admission_type_id")
  locationId         Int?      @map("location_id")
  procedureUnitId    Int?      @map("procedure_unit_id")
  serviceLineId      Int?      @map("service_line_id")
  providerId         Int?      @map("provider_id")
  procedureDate      DateTime  @map("procedure_date") @db.Timestamp(6)

  admissionType      admissionType? @relation(fields: [admissionTypeId], references: [admissionTypeId], onDelete: NoAction, onUpdate: NoAction)
  location           location? @relation(fields: [locationId], references: [locationId], onDelete: NoAction, onUpdate: NoAction)
  procedureUnit      procedureUnit? @relation(fields: [procedureUnitId], references: [procedureUnitId], onDelete: NoAction, onUpdate: NoAction)
  serviceLine        serviceLine? @relation(fields: [serviceLineId], references: [serviceLineId], onDelete: NoAction, onUpdate: NoAction)
  provider           provider? @relation(fields: [providerId], references: [providerId], onDelete: NoAction, onUpdate: NoAction)
  cases              cases?
}

model admissionType {
  admissionTypeId       Int @id @default(autoincrement()) @map("admission_type_id")
  admissionTypeName     String
  scheduling            scheduling[]
}

model location {
  locationId     Int       @id @default(autoincrement()) @map("location_id")
  fhirResourceId String   @unique @map("fhir_resource_id")
  locationName   String   @map("location_name")
  createTime     DateTime? @map("create_time") @db.Timestamp(6) @default(now())
  updateTime     DateTime? @map("update_time") @db.Timestamp(6) @default(now())
  procedureUnit  procedureUnit[] 
  scheduling     scheduling[]
}

model procedureUnit {
  procedureUnitId     Int       @id @default(autoincrement()) @map("procedure_unit_id")
  fhirResourceId      String   @unique @map("fhir_resource_id")
  procedureUnitName   String   @map("procedure_unit_name")
  locationFk          location  @relation(fields: [locationId], references: [locationId], onDelete: Cascade)
  locationId          Int  
  serviceLine         serviceLine[]
  scheduling          scheduling[]
}

model serviceLine {
  serviceLineId     Int       @id @default(autoincrement()) @map("service_line_id")
  fhirResourceId    String   @unique @map("fhir_resource_id")
  serviceLineName   String   @map("service_line_name")
  procedureUnitFk   procedureUnit @relation(fields: [procedureUnitId], references: [procedureUnitId], onDelete: Cascade)
  procedureUnitId   Int
  provider          ServiceLineToProvider[]
  scheduling        scheduling[]
}

model provider {
  providerId     Int       @id @default(autoincrement()) @map("provider_id")
  fhirResourceId String   @unique @map("fhir_resource_id")
  firstName      String   @map("first_name")
  lastName       String   @map("last_name")
  address        String?
  email          String?
  createTime     DateTime? @map("create_time") @db.Timestamp(6) @default(now())
  updateTime     DateTime? @map("update_time") @db.Timestamp(6) @default(now())
  serviceLine    ServiceLineToProvider[]
  scheduling     scheduling[]
}

model ServiceLineToProvider {
  serviceLine       serviceLine     @relation(fields: [serviceLineId], references: [serviceLineId], onDelete: Cascade, onUpdate: Cascade)
  serviceLineId     Int
  provider          provider     @relation(fields: [providerId], references: [providerId], onDelete: Cascade, onUpdate: Cascade)
  providerId        Int
  @@id([serviceLineId, providerId])
}



model financial {
  financialId           Int       @id @default(autoincrement()) @map("financial_id")
  insuranceId           Int?      @map("insurance_id")
  insuranceGroupName    String?   @map("insurance_group_name") @default("")
  insuranceGroupNumber  String?   @map("insurance_group_number") @default("")
  priorAuthorization    String    @map("prior_authorization") @default("Incomplete")
  priorAuthId           String?   @map("prior_auth_id") @default("")
  priorAuthDate         DateTime? @map("prior_auth_date") @db.Timestamp(6)
  createTime            DateTime? @map("create_time") @db.Timestamp(6) @default(now())
  updateTime            DateTime? @map("update_time") @db.Timestamp(6) @default(now())
  caseId                Int?      @map("case_id")

  cases                 cases?  @relation(fields: [caseId], references: [caseId], onDelete: NoAction, onUpdate: NoAction)
  insurance             insurance? @relation(fields: [insuranceId], references: [insuranceId], onDelete: NoAction, onUpdate: NoAction)
}

model insurance {
  insuranceId         Int @id @default(autoincrement()) @map("insurance_id")
  insuranceName       String @map("insurance_name")
  financial           financial[]
}


model procedureTab {
  procedureTabId    Int       @id @default(autoincrement()) @map("procedure_tab_id")
  procedureId       Int?      @map("procedure_id")
  approachId        Int?      @map("approach_id")
  lateralityId      Int?      @map("laterality_id")
  cptCodeId         Int?      @map("cpt_code_id")
  icdCodeId         Int?      @map("icd_code_id")
  caseId            Int?      @map("case_id")
  anesthesiaNotes   String?   @map("anesthesia_notes") @default("")

  cases             cases?
  procedure         procedure? @relation(fields: [procedureId], references: [procedureId], onDelete: NoAction, onUpdate: NoAction)
  approach          approach? @relation(fields: [approachId], references: [approachId], onDelete: NoAction, onUpdate: NoAction)
  laterality        laterality? @relation(fields: [lateralityId], references: [lateralityId], onDelete: NoAction, onUpdate: NoAction)
  anesthesia        anesthesia[]
  cptCode           cptCode? @relation(fields: [cptCodeId], references: [cptCodeId], onDelete: NoAction, onUpdate: NoAction)
  icdCode           icdCode? @relation(fields: [icdCodeId], references: [icdCodeId], onDelete: NoAction, onUpdate: NoAction)
}

model procedure {
  procedureId    Int       @id @default(autoincrement()) @map("procedure_id")
  procedureName  String @map("procedure_name")
  procedureTab   procedureTab[]
}

model approach {
  approachId    Int       @id @default(autoincrement()) @map("approach_id")
  approachName  String @map("approach_name")
  procedureTab   procedureTab[]
}

model laterality {
  lateralityId    Int       @id @default(autoincrement()) @map("laterality_id")
  lateralityName  String @map("laterality_name")
  procedureTab   procedureTab[]
}

model anesthesia {
  anesthesiaId    Int       @id @default(autoincrement()) @map("anesthesia_id")
  anesthesiaName  String @map("anesthesia_name")
  procedureTab   procedureTab[]
}

model cptCode {
  cptCodeId    Int       @id @default(autoincrement()) @map("cpt_code_id")
  cptCodeName  String @map("cpt_code_name")
  procedureTab   procedureTab[]
}

model icdCode {
  icdCodeId    Int       @id @default(autoincrement()) @map("icd_code_id")
  icdCodeName  String @map("icd_code_name")
  procedureTab   procedureTab[]
}

model clinical {
  clinicalId           Int       @id @default(autoincrement()) @map("clinical_id")
  physicianFirstName      String?    @map("physician_first_name") @default("")
  physicianLastName       String?    @map("physician_last_name") @default("")
  physicianPhone          String?    @map("physician_phone") @default("")
  preOpRequired           String?   @map("pre_op_required")
  diagnosticTestsRequired String?   @map("diagnostic_tests_required")
  clearanceRequired       String?   @map("clearance_required")
  postOpDateTime          DateTime?  @map("post_op_date_time") @db.Timestamp(6)
  preOpFormId             Int?        @map("pre_op_form_id")
  preOpForm               preOpForm?  @relation(fields: [preOpFormId], references: [preOpFormId])
  diagnosticTests         diagnosticTestForm[]
  clearances              clearanceForm[]
  cases                   cases?
}

model preOpForm {
  preOpFormId             Int       @id @default(autoincrement()) @map("pre_op_form_id")
  clinicalId           Int?       @map("clinical_id")
  preOpDateTime           DateTime?  @map("pre_op_date_time") @db.Timestamp(6)
  atProcedureLocation     Boolean?   @map("at_procedure_location")
  facilityId              Int?       @map("facility_id")
  facility                facility?  @relation(fields: [facilityId], references: [facilityId])
  clinical             clinical[]
}

model facility {
    facilityId              Int       @id @default(autoincrement()) @map("facility_id")
    facilityName            String    @map("facility_name") @default("")
    phone                   String    @map("phone") @default("")
    addressOne              String    @map("address_one") @default("")
    addressTwo              String    @map("address_two") @default("")
    city                    String    @map("city") @default("")
    state                   String    @map("state") @default("")
    zip                     String    @map("zip") @default("")
    diagnosticTestForm      diagnosticTestForm[]
    clearanceForm           clearanceForm[]
    preOpForm               preOpForm[]
}

model diagnosticTestForm {
    diagnosticTestFormId        Int       @id @default(autoincrement()) @map("diagnostic_test_form_id")
    diagnosticTestId            Int?      @map("diagnostic_test_id")
    clinicalId                  Int?       @map("clinical_id")       
    testNameOther               String?   @map("test_name_other") @default("")
    testDateTime                DateTime?  @map("test_date_time") @db.Timestamp(6)
    atProcedureLocation         Boolean?   @map("at_procedure_location")
    facilityId                  Int?      @map("facility_id")
    facility                    facility?  @relation(fields: [facilityId], references: [facilityId])
    clinical                    clinical?  @relation(fields: [clinicalId], references: [clinicalId])
    diagnosticTest              diagnosticTest? @relation(fields: [diagnosticTestId], references: [diagnosticTestId])
}

model diagnosticTest {
  diagnosticTestId      Int       @id @default(autoincrement()) @map("diagnostic_test_id")
  testName              String    @map("test_name")
  diagnosticTestForm    diagnosticTestForm[]
}

model clearanceForm {
  clearanceFormId           Int       @id @default(autoincrement()) @map("clearance_form_id")
  clearanceId               Int?      @map("clearance_id")
  clinicalId                Int?       @map("clinical_id")    
  clearanceNameOther        String?   @map("clearance_name_other") @default("")
  clearanceDateTime         DateTime?  @map("clearance_date_time") @db.Timestamp(6)
  physicianFirstName        String?   @map("physician_first_name") @default("")
  physicianLastName         String?   @map("physician_last_name") @default("")
  physicianPhone            String?   @map("physician_phone") @default("")
  atProcedureLocation       Boolean?   @map("at_procedure_location")
  facilityId                Int?      @map("facility_id")
  facility                  facility?  @relation(fields: [facilityId], references: [facilityId])
  clearance                 clearance? @relation(fields: [clearanceId], references: [clearanceId])
  clinical                  clinical? @relation(fields: [clinicalId], references: [clinicalId])
}

model clearance {
  clearanceId     Int       @id @default(autoincrement()) @map("clearance_id")
  clearanceName   String    @map("clearance_name")
  clearanceForm   clearanceForm[]
}

model productTab {
  productTabId              Int  @id @default(autoincrement()) @map("product_tab_id")
  caseId                    Int?
  manufacturerId            Int?
  vendorId                  Int?

  quantity                  Int  @default(1)
  catalogNumber             String?  @default("")
  vendorConfirmation        Boolean?
  implantDelivery           Boolean?
  trayDelivery              Boolean?
  sterilization             Boolean?
  productName               String?  @default("")
  productType               String?  @default("")

  manufacturer              manufacturer?  @relation(fields: [manufacturerId], references: [manufacturerId])
  vendor                    vendor?  @relation(fields: [vendorId], references: [vendorId])
  cases                     cases? @relation(fields: [caseId], references: [caseId])
}

model product {
    productId                 Int  @id @default(autoincrement()) @map("product_id")
    productTabId              Int?
    productTypeId             Int?
    productName               String
    productType               productType? @relation(fields: [productTypeId], references: [productTypeId])
}

model productType {
    productTypeId             Int  @id @default(autoincrement()) @map("product_type_id")
    productType               String
    product                   product[]
}

model manufacturer {
  manufacturerId        Int       @id @default(autoincrement()) @map("manufacturer_id")
  manufacturerName      String @map("manufacturer_name")
  productTab               productTab[]
}

model vendor {
  vendorId      Int @id @default(autoincrement()) @map("vendor_id")
  vendorName    String @map("vendor_name")
  productTab       productTab[]
}